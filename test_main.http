# MovieRecommender HTTP test flow (TMDb-only)
# Requires API running on localhost:8000 with TMDB_READ_TOKEN or TMDB_API_KEY set.

### Create guest group
POST http://127.0.0.1:8000/groups
Content-Type: application/json

{
  "display_name": "HttpSmoke",
  "streaming_services": ["netflix", "hulu", "amazon", "hbo"]
}

# NOTE: Copy access_token into {{token}} and group.code into {{code}} manually from the previous response.

### Who am I (participant)
GET http://127.0.0.1:8000/whoami
Authorization: Bearer {{token}}

### Nominate two genres
POST http://127.0.0.1:8000/groups/{{code}}/genres/nominate
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "genres": ["Comedy", "Thriller"]
}

### Progress
GET http://127.0.0.1:8000/groups/{{code}}/progress
Authorization: Bearer {{token}}

### Current movie (title + reason)
GET http://127.0.0.1:8000/groups/{{code}}/movies/current
Authorization: Bearer {{token}}

### Vote NO
POST http://127.0.0.1:8000/groups/{{code}}/movies/vote
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "accept": false
}

### Current movie again
GET http://127.0.0.1:8000/groups/{{code}}/movies/current
Authorization: Bearer {{token}}

### Disband group (host leaves)
POST http://127.0.0.1:8000/groups/leave
Authorization: Bearer {{token}}
